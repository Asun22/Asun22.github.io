(function(t){function e(e){for(var s,r,n=e[0],c=e[1],l=e[2],d=0,p=[];d<n.length;d++)r=n[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&p.push(i[r][0]),i[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(p.length)p.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],s=!0,n=1;n<a.length;n++){var c=a[n];0!==i[c]&&(s=!1)}s&&(o.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},i={app:0},o=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=e,n=n.slice();for(var l=0;l<n.length;l++)e(n[l]);var u=c;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0251":function(t,e,a){},4190:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);var s=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},o=[],r={name:"app",components:{}},n=r,c=a("2877"),l=Object(c["a"])(n,i,o,!1,null,null,null),u=l.exports,d=a("8c4f"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-sticky",{attrs:{"offset-top":0}},[a("div",{staticClass:"header"},[a("ul",[a("li",[a("h2",[t._v("ele.me")])]),a("li",[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.flag,expression:"!flag"}]}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.flag,expression:"flag"}],on:{click:function(e){return t.toJump("zd")}}},[t._v("置顶")])]),a("li",[a("div",{on:{click:function(e){return t.jump("/Logo")}}},[t._v("登录|注册")])])])])]),t._m(0),a("div",{staticClass:"dw"},[a("h3",{staticClass:"blue"},[t._v(t._s(t.guess.name))])]),a("div",{staticClass:"sdhot"},[a("ul",t._l(t.hot,(function(e,s){return a("li",{key:s},[t._v(t._s(e.name))])})),0)]),a("div",{staticClass:"cityPosition"},t._l(t.zlist,(function(e,s){return a("div",{key:s},[a("span",{on:{click:function(a){return t.toJump(e)}}},[t._v(t._s(e))])])})),0),t._l(t.zlist,(function(e,s){return a("div",{key:s},[a("p",{ref:e,refInFor:!0,staticClass:"sdzm",attrs:{id:e}},[t._v(t._s(e))]),a("ul",{staticClass:"hot"},t._l(t.group[e],(function(s,i){return a("li",{key:i,on:{click:function(a){return t.jumpCity(e.id,e.name)}}},[t._v(t._s(s.name))])})),0)])}))],2)},v=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dq"},[a("p",[t._v("当前定位城市")]),a("p",[t._v("定位不准时，请在城市列表中选择")])])}],m=a("bc3a"),h=a.n(m);h.a.defaults.withCredentials=!0;const _=h.a.create({baseURL:"http://elm.cangdu.org",timeout:"5000"});_.interceptors.request.use(t=>t),_.interceptors.response.use(t=>t);var f=_;function g(t,e){return f.get(t,{params:e})}function b(t){return g("/v1/cities?type="+t)}function y(t){return g("/v1/user?user_id="+t)}function w(t){return g("/v2/index_entry?geohash="+t)}var C={name:"demo",props:[],components:{},data(){return{guess:{},hot:[],group:{},zlist:[],flag:!1}},computed:{},watch:{},methods:{jumpCity(t,e){console.log(t),this.$router.push({path:"/Sousuo",query:{cityId:t,cityName:e}})},async ajaxGuess(){let{data:t}=await b("guess");console.log(t),this.guess=t;let{data:e}=await b("hot");console.log(e),this.hot=e;let{data:a}=await b("group");console.log(a),this.group=a,this.zlist=Object.keys(a).sort()},toJump(t){document.body.scrollTop=document.documentElement.scrollTop="zd"!=t?this.$refs[t][0].offsetTop-65:0},handleScrollx(){window.pageYOffset>50?this.flag=!0:this.flag=!1},jump(t,e){this.$router.push({path:t,query:{data:e}})}},mounted(){this.ajaxGuess(),window.addEventListener("scroll",this.handleScrollx,!0)}},k=C,x=(a("88e6"),Object(c["a"])(k,p,v,!1,null,"2868ac74",null)),$=x.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"header"},[a("ul",[a("li",{on:{click:t.prev}},[t._v("《")]),a("li",[t._v("密码登录")]),a("li")])]),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"sdin",attrs:{type:"text",placeholder:"用户名"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"sdin",attrs:{type:"text",placeholder:"密码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),a("div",{staticClass:"code"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.captcha_code,expression:"captcha_code"}],staticClass:"sdins",attrs:{type:"text",placeholder:"验证码"},domProps:{value:t.captcha_code},on:{input:function(e){e.target.composing||(t.captcha_code=e.target.value)}}}),a("img",{attrs:{src:t.cap,alt:""}})])]),a("p",{staticClass:"red"},[t._v("温馨提示：未注册过的账号，登录时将自动注册")]),a("p",{staticClass:"red"},[t._v("注册过的用户可凭账号密码登录")]),a("br"),a("button",{on:{click:t.submit}},[t._v("登录")])])},j=[];h.a.defaults.withCredentials=!0;var O={data(){return{cap:"",username:"",password:"",captcha_code:""}},components:{},created(){},mounted(){this.ajaxCodeFn()},methods:{prev(){this.$router.go(-1)},setCookie(t,e,a){var s=new Date;s.setDate(s.getDate()+a),document.cookie=t+"="+e+"; expires="+s.toDateString()},async ajaxCodeFn(){let{data:t}=await h.a.post("/api/v1/captchas");console.log(t),this.cap=t.code},async submit(){this.setCookie("cap",this.captcha_code,2),this.setCookie("SID",100,2);let{data:t}=await h.a.post("/api/v2/login",{username:this.username,password:this.password,captcha_code:this.captcha_code});console.log(t),localStorage.setItem("username","password","captcha_code"),this.$router.replace({path:"/Wode"})}}},I=O,E=(a("658d"),Object(c["a"])(I,S,j,!1,null,"d9f698e0",null)),N=E.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"header"},[a("div",{attrs:{slot:"left"},slot:"left"},[a("div",{on:{click:t.back}},[a("i",{staticClass:"el-icon-back",staticStyle:{"font-size":"26px"}})])]),a("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.$route.query.cityName))]),a("div",{attrs:{slot:"right"},slot:"right"},[a("div",{on:{click:t.back}},[t._v("切换城市")])])]),a("div",{staticClass:"search"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputText,expression:"inputText"}],attrs:{type:"search",placeholder:"请输入学校，地址，商务楼"},domProps:{value:t.inputText},on:{input:function(e){e.target.composing||(t.inputText=e.target.value)}}})]),a("div",{staticClass:"btn",on:{click:t.submit}},[t._v(" 提交 ")]),t.list.length>0?a("ul",t._l(t.list,(function(e,s){return a("li",{key:s,on:{click:function(a){return t.storage(e)}}},[a("p",[t._v(t._s(e.name))]),a("p",[t._v(" "+t._s(e.address)+" ")])])})),0):a("div",[a("h4",[t._v("搜索历史")]),a("ul",t._l(t.historyList,(function(e,s){return a("li",{key:s},[a("p",[t._v(t._s(e.name))]),a("p",[t._v(" "+t._s(e.address)+" ")])])})),0),a("button",{on:{click:t.clearFn}},[t._v("清空历史记录")])]),a("van-tabbar",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-tabbar-item",{attrs:{icon:"home-o"}},[a("router-link",{attrs:{to:"Weimai"}},[t._v("外卖")])],1),a("van-tabbar-item",{attrs:{icon:"search"}},[a("router-link",{attrs:{to:"Sousuo"}},[t._v("搜索")])],1),a("van-tabbar-item",{attrs:{icon:"friends-o"}},[a("router-link",{attrs:{to:"Dingdan"}},[t._v("订单")])],1),a("van-tabbar-item",{attrs:{icon:"setting-o"}},[a("router-link",{attrs:{to:"Wode"}},[t._v("我的")])],1)],1)],1)},W=[],D={data(){return{cityId:"",inputText:"",list:[],historyList:[],active:""}},components:{},created(){this.cityId=this.$route.query.cityId;let t=window.localStorage.getItem("history");t&&(this.historyList=JSON.parse(t))},mounted(){},methods:{submit(){h.a.get(`http://elm.cangdu.org/v1/pois?type=search&city_id=${this.cityId}&keyword=${this.inputText}`).then(t=>{console.log(t),this.list=t.data})},storage(t){console.log(t),console.log(t.latitude),console.log(t.longitude),this.$store.commit("changeLatitude",t.latitude),this.$store.commit("changeLongitude",t.longitude);let e=window.localStorage.getItem("history"),a=[];if(e){a=JSON.parse(e);let s=a.findIndex(e=>e.latitude==t.latitude);-1!=s||(a.length>=4&&a.shift(),a.push(t))}else a.push(t);window.localStorage.setItem("history",JSON.stringify(a)),this.$router.push({path:"/Msite",query:{cityId:this.cityId,cityName:this.$route.query.cityName}})},clearFn(){console.log("清空"),this.historyList=[],window.localStorage.removeItem("history")},back(){this.$router.replace({path:"/Ctiry"})}}},P=D,T=(a("7c4f"),Object(c["a"])(P,L,W,!1,null,"6125fb5b",null)),J=T.exports,q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"header"},[a("div",{staticStyle:{margin:"0 auto"},attrs:{slot:"left"},slot:"left"},[a("i",{staticClass:"el-icon-search"})]),a("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.title))]),a("div",{staticStyle:{margin:"0 auto"},attrs:{slot:"right"},slot:"right"},[a("i",{staticClass:"el-icon-s-custom"})])])])},M=[],z=a("9f3a"),U={data(){return{title:""}},computed:{...Object(z["b"])(["latitude","longitude"])},components:{},created(){},mounted(){h.a.get(`http://elm.cangdu.org/v2/pois/${this.latitude},${this.longitude}`).then(t=>{console.log(t),this.title=t.data.name})},methods:{}},F=U,G=Object(c["a"])(F,q,M,!1,null,"4c6986dc",null),A=G.exports,R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sdbox"},[a("div",{staticClass:"sdheader"},[a("div",{staticClass:"header"},[a("ul",[a("li",{on:{click:t.go}},[t._v("《")]),a("li",[t._v("我的")]),a("li")])]),a("div",{staticClass:"sdyh"},[t._m(0),a("div",{staticClass:"sdyh2"},[a("p",[t._v(t._s(t.user.username))]),a("p",[t._v("暂无绑定手机号")])])])]),t._m(1),a("div",{staticClass:"sdlbui"},[a("ul",[a("li",[a("p",[a("router-link",{attrs:{to:"Dingdan"}},[t._v("我的订单")])],1),a("p",[t._v(">")])]),t._m(2),t._m(3)])]),t._m(4),a("van-tabbar",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-tabbar-item",{attrs:{icon:"home-o"}},[a("router-link",{attrs:{to:"Weimai"}},[t._v("外卖")])],1),a("van-tabbar-item",{attrs:{icon:"search"}},[a("router-link",{attrs:{to:"Sousuo"}},[t._v("搜索")])],1),a("van-tabbar-item",{attrs:{icon:"friends-o"}},[a("router-link",{attrs:{to:"Dingdan"}},[t._v("订单")])],1),a("van-tabbar-item",{attrs:{icon:"setting-o"}},[a("router-link",{attrs:{to:"Wode"}},[t._v("我的")])],1)],1)],1)},Y=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sdyh1"},[a("img",{staticClass:"sdimg",attrs:{src:"//elm.cangdu.org/img/default.jpg",alt:""}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ul",{staticClass:"sdul"},[a("li",[a("span",{staticClass:"sdfs"},[t._v("0.00")]),a("span",[t._v("元")]),a("p",[t._v("我的余额")])]),a("li",[a("span",{staticClass:"sdfss"},[t._v("3")]),a("span",[t._v("个")]),a("p",[t._v("我的余额")])]),a("li",[a("span",{staticClass:"sdfsss"},[t._v("0")]),a("span",[t._v("分")]),a("p",[t._v("我的积分")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("p",[t._v("积分商城")]),a("p",[t._v(">")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("p",[t._v("饿了么会员卡")]),a("p",[t._v(">")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sdlbui"},[a("ul",[a("li",[a("p",[t._v("服务中心")]),a("p",[t._v(">")])]),a("li",[a("p",[t._v("下载饿了么APP")]),a("p",[t._v(">")])])])])}],B={name:"demo",props:[],components:{},data(){return{user:JSON.parse(localStorage.getItem("s"))||[],active:""}},computed:{},watch:{},methods:{go(){this.$router.go(-1)},async ajaxUser(){let{data:t}=await y("Null");console.log(t),this.user=t,localStorage.setItem("s",JSON.stringify(this.user))}},beforeCreate(){},created(){},beforeMount(){},mounted(){this.ajaxUser()},beforeUpdate(){},updated(){},activated(){},deactivated(){},beforeDestroy(){},destroyed(){}},H=B,K=(a("5b3a"),Object(c["a"])(H,R,Y,!1,null,"57a24bcb",null)),Q=K.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"header"},[a("ul",[a("li",[a("router-link",{attrs:{to:"Sousuo"}},[a("van-icon",{attrs:{name:"search"}})],1)],1),a("li",[t._v("长宁区北新泾明基商...")]),a("li",[a("router-link",{attrs:{to:"Wode"}},[a("van-icon",{attrs:{name:"manager-o"}})],1)],1)])]),a("div",{staticClass:"sdlb"},[a("van-swipe",{staticClass:"my-swipe",attrs:{autoplay:8e3,"indicator-color":"white"}},[a("van-swipe-item",[a("ul",t._l(t.geohash,(function(e,s){return s>=8?a("li",{key:s},[a("img",{attrs:{src:t.pic+e.image_url,alt:""}}),a("p",[t._v(t._s(e.title))])]):t._e()})),0)]),a("van-swipe-item",[a("ul",t._l(t.geohash,(function(e,s){return s<8?a("li",{key:s},[a("img",{attrs:{src:t.pic+e.image_url,alt:""}}),a("p",[t._v(t._s(e.title))])]):t._e()})),0)])],1)],1),a("div",[a("p",[t._v("附近商家")]),a("div",t._l(t.restaurant_id,(function(e,s){return a("van-card",{key:s,attrs:{price:e.float_minimum_order_amount+"起送/配送费约￥"+e.float_delivery_fee,desc:"月售"+e.recent_order_num+"单",title:e.name,thumb:t.pics+e.image_path}})})),1)]),a("div",[a("van-tabbar",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-tabbar-item",{attrs:{icon:"home-o"}},[a("router-link",{attrs:{to:"Weimai"}},[t._v("外卖")])],1),a("van-tabbar-item",{attrs:{icon:"search"}},[a("router-link",{attrs:{to:"Sousuo"}},[t._v("搜索")])],1),a("van-tabbar-item",{attrs:{icon:"friends-o"}},[a("router-link",{attrs:{to:"Dingdan"}},[t._v("订单")])],1),a("van-tabbar-item",{attrs:{icon:"setting-o"}},[a("router-link",{attrs:{to:"Wode"}},[t._v("我的")])],1)],1)],1)])},X=[],Z={name:"demo",props:[],components:{},data(){return{active:"",geohash:[],restaurant_id:[]}},computed:{},watch:{},methods:{getCtiry(){let t=JSON.parse(window.localStorage.getItem("Ctiry"));this.Ctiry=this.$router.query==undefind?t:this.$route.query},async ajaxWm(){let{data:t}=await w("type");console.log(t),this.geohash=t}},beforeCreate(){},created(){},beforeMount(){},mounted(){this.ajaxWm(),this.pic="https://fuss10.elemecdn.com",this.pics="//elm.cangdu.org/img/",h.a.get("http://elm.cangdu.org/shopping/restaurants?latitude='${this.Ctiry.latitude}'+&longitude=+'${this.Ctiry.longitude}'+&offset=0&limit=20&extras[]=activities&keyword=&restaurant_category_id=&restaurant_category_ids[]=&order_by=&delivery_mode[]=`").then(t=>{console.log(t),this.restaurant_id=t.data})},beforeUpdate(){},updated(){},activated(){},deactivated(){},beforeDestroy(){},destroyed(){}},tt=Z,et=(a("bb47"),Object(c["a"])(tt,V,X,!1,null,"1764c6d2",null)),at=et.exports,st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("van-tabbar",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-tabbar-item",{attrs:{icon:"home-o"}},[a("router-link",{attrs:{to:"Weimai"}},[t._v("外卖")])],1),a("van-tabbar-item",{attrs:{icon:"search"}},[a("router-link",{attrs:{to:"Sousuo"}},[t._v("搜索")])],1),a("van-tabbar-item",{attrs:{icon:"friends-o"}},[a("router-link",{attrs:{to:"Dingdan"}},[t._v("订单")])],1),a("van-tabbar-item",{attrs:{icon:"setting-o"}},[a("router-link",{attrs:{to:"Wode"}},[t._v("我的")])],1)],1)],1)},it=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[a("ul",[a("li",[a("h2",[t._v("《")])]),a("li",[a("h2",[t._v("订单列表")])]),a("li")])])}],ot={name:"demo",props:[],components:{},data(){return{active:""}},computed:{},watch:{},methods:{},beforeCreate(){},created(){},beforeMount(){},mounted(){},beforeUpdate(){},updated(){},activated(){},deactivated(){},beforeDestroy(){},destroyed(){}},rt=ot,nt=(a("ce0a"),Object(c["a"])(rt,st,it,!1,null,"3c457837",null)),ct=nt.exports;s["a"].use(d["a"]);const lt=[{path:"/",redirect:"Ctiry"},{path:"/Weimai",name:"Weimai",component:at},{path:"/Dingdan",name:"Dingdan",component:ct},{path:"/Wode",name:"Wode",component:Q,children:[]},{path:"/Ctiry",name:"Ctiry",component:$},{path:"/Logo",name:"Logo",component:N},{path:"/Sousuo",name:"Sousuo",component:J},{path:"/Msite",name:"Msite",component:A}],ut=new d["a"]({routes:lt});var dt=ut;s["a"].use(z["a"]);var pt=new z["a"].Store({state:{count:100,arr:[1,2,3,4],latitude:"",longitude:"",isLoading:!1},mutations:{changeLoading(t,e){t.isLoading=e},changeLatitude(t,e){t.latitude=e},changeLongitude(t,e){t.longitude=e}},actions:{},modules:{}}),vt=a("b970");a("157a");s["a"].use(vt["a"]),s["a"].config.productionTip=!1,new s["a"]({router:dt,store:pt,render:function(t){return t(u)}}).$mount("#app")},"5b3a":function(t,e,a){"use strict";var s=a("b48a"),i=a.n(s);i.a},"658d":function(t,e,a){"use strict";var s=a("0251"),i=a.n(s);i.a},"6a56":function(t,e,a){},7662:function(t,e,a){},"7c4f":function(t,e,a){"use strict";var s=a("6a56"),i=a.n(s);i.a},"88e6":function(t,e,a){"use strict";var s=a("d0a6"),i=a.n(s);i.a},b48a:function(t,e,a){},bb47:function(t,e,a){"use strict";var s=a("7662"),i=a.n(s);i.a},ce0a:function(t,e,a){"use strict";var s=a("4190"),i=a.n(s);i.a},d0a6:function(t,e,a){}});
//# sourceMappingURL=app.f9f6d485.js.map